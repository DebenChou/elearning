https://linux.cn/article-10375-1.html

pi/raspberry
sudo raspi-config

https://www.offensive-security.com/kali-linux-arm-images/
https://www.raspberrypi.org/downloads/

mac制作启动盘
https://www.raspberrypi.org/documentation/installation/installing-images/mac.md
格式化为FAT32
diskutil list
sudo dd bs=1m if=path_of_your_image.img of=/dev/rdiskn conv=sync
别SD卡的磁盘（而不是分区），例如disk4，不是disk4s1
diskutil unmountDisk /dev/disk<disk# from diskutil>
sudo dd bs=1m if=image.img of=/dev/rdisk<disk# from diskutil> conv=sync
sudo dd bs=1m if=2018-11-13-raspbian-stretch.img of=/dev/rdisk4 conv=sync
sudo dd bs=1M if=image.img of=/dev/rdisk<disk# from diskutil> conv=sync
弹出卡
sudo diskutil eject /dev/rdisk<disk# from diskutil>
df -h
sudo diskutil unmount /dev/disk3s5

DNS 服务器
https://www.ionos.com/digitalguide/server/configuration/how-to-make-your-raspberry-pi-into-a-dns-server/
针对黑客的蜜罐陷阱
https://github.com/mattymcfatty/HoneyPi
打印服务器
https://opensource.com/article/18/3/print-server-raspberry-pi
网络附加存储（NAS）
https://howtoraspberrypi.com/create-a-nas-with-your-raspberry-pi-and-samba/
sudo apt update
sudo apt upgrade
sudo mkdir /home/shares
sudo mkdir /home/shares/public
sudo chown -R root:users /home/shares/public
sudo chmod -R ug=rwx, o=rx /home/shares/public
sudo apt install samba samba-common-bin
sudo nano /etc/samba/smb.conf
security = user
read only = no
[public]
  comment = public storage
  path = /home/shares/public
  valid users = @users
  force group = users
  create mask = 0660
  directory mask = 0771
  read only = no
sudo /etc/init.d/samba restart
sudo smbpasswd -a pi

dmesg
umount /dev/sda1
sudo mkfs.ext4 /dev/sda1
sudo mkdir /home/shares/public/disk1
sudo chown -R root:users /home/shares/public/disk1
sudo chmod -R ug=rwx,o=rx /home/shares/public/dis
sudo mount /dev/sda1 /home/shares/public/disk1
sudo nano /etc/fstab
/dev/sda1 /home/shares/public/disk1 auto noatime,nofail 0 0

数字标牌
https://blog.capterra.com/7-free-and-open-source-digital-signage-software-options-for-your-next-event/
目录和信息亭:它直接引导到 Chromium 的全屏版本 —— 这非常适合导购、图书馆目录等
https://github.com/guysoft/FullPageOS
https://github.com/guysoft/CustomPiOS

用于构建OctoPi的脚本，这是一个用于通过Web控制3D打印机的Raspberry PI发行版
https://github.com/guysoft/OctoPi
https://octoprint.org/
https://github.com/Ultimaker/CuraEngine
https://github.com/foosel/OctoPrint

媒体中心
https://osmc.tv/download/
https://raspbian-france.fr/media-center-raspberry-pi-osmc-xbmc/

摄像头监控
https://raspbian-france.fr/video-surveillance-raspberry-pi-camera/
sudo apt-get install motion
sudo modprobe bcm2835-v4l2
echo 'bcm2835-v4l2' | sudo tee -a /etc/modules
vi / etc / default / motion
start_motion_daemon = YES
vi /etc/motion.conf 或 /etc/motion/motion.conf
#On active le daemon
daemon on
#On utilise le fichier /tmp/motion.log pour stocker les logs
logfile /tmp/motion.log
#On règle la résolution (adapter la résolution à celle de votre camera. Ici, nous avons réglé pour la caméra de la raspberry pi)
width 1280
height 720
#On règle le nombre d'images prises par seconde
framerate 2
#On règle le nombre d'images enregistrées avant et après un mouvement (ici 2 avant 2 après)
pre_capture 2
post_capture 2
#On règle le code, pour une lecture sur de nombreux médias
ffmpeg_video_codec msmpeg4
#On autorise la lecture du flux depuis internet pour permettre l'accès en ligne à la vidéo-surveillance
stream_localhost off



https://github.com/jacksonliam/mjpg-streamer

http://www.karlrunge.com/x11vnc/


启用树莓派的I2C功能
sudo apt-get install -y python-smbus
sudo apt-get install -y i2c-tools
sudo raspi-config
http://shumeipai.nxez.com/2019/04/29/use-the-ssd1306-oled-display-on-the-raspberry-pi.html

重启树莓派。
sudo reboot

安装 Adafruit-SSD1306 库
Adafruit-SSD1306 是基于 Python 的 OLED 库，可以用于 128×64、128×32 像素 SSD1306 芯片控制的屏幕。
使用下面的命令安装。
sudo python -m pip install --upgrade pip setuptools wheel
注意，如果这一步出现错误提示“TypeError: unsupported operand type(s) for -=: ‘Retry’ and ‘int’”，可以尝试卸载后重新安装 pip 来解决。
sudo apt-get remove python-pip python3-pip
sudo apt-get install python-pip python3-pip
sudo apt-get install python-pil python3-pil
sudo pip install Adafruit-SSD1306
git clone https://github.com/adafruit/Adafruit_Python_SSD1306.git
cd Adafruit_Python_SSD1306
sudo python setup.py install
下面通过命令检测是否识别到 I2C 设备。
sudo i2cdetect -y 1
sudo i2cdetect -y 0
设置开机运行
sudo nano /etc/rc.local
sudo python /home/pi/stats.py &
sudo reboot

openwrt lede
https://github.com/coolsnowwolf/lede


显示系统的硬盘设备以及分区
sudo fdisk -l  ＃显示设备名，例如/dev/sda1
树莓派默认不支持NTFS文件系统，如果需要支持则要安装相应的软件包
sudo apt-get install ntfs-3g                   #安装支持NTFS文件系统的软件包
sudo reboot
在树莓派上建立挂载点
sudo mkdir /media/usbhdd                  #建立挂载目录
sudo chown pi:pi /media/usbhdd       #设置目录的所有人和所有组
挂载/dev/sda1设备硬盘
sudo mount -t auto -o uid=pi,gid=pi /dev/sda1 /media/usbhdd
卸载
sudo umount /media/usbhdd
实现开机自动挂接
修改/etc/fstab文件，增加如下的内容
/dev/sda1  /media/usbhdd  vfat  rw,defaults  0   0
获取硬盘的UUID值
sudo blkid
UUID="1599-28FA"   /media/usbhdd  auto  rw,defaults   0    0
sudo reboot
硬盘文件系统的种类
vfat   fat32
ntfs       ntfs
ext3     古老的Linux文件系统
ext4     当前的linux文件系统
sudo mount -a

查看PI版本
gpio readall
最新的系统时间
cat /etc/rpi-issue
系统固件版本
vcgencmd version

放入TF内存卡启动系统登陆默认用户名pi和密码raspberry
cmdline.txt或config.txt文件增加
空格program_usb_boot_mode=1
成功进入后关机sudo halt 拔下TF卡
brew cask install balenaetcher
https://github.com/balena-io/etcher
USB启动大约要比TF卡多花费10秒钟

PI没有图形界面的系统下载
Raspbian Jessie Lite
https://downloads.raspberrypi.org/raspbian_lite_latest

=================================================================
https://dietpi.com/
https://github.com/MichaIng/DietPi
http://dietpi.com/downloads/images/DietPi_RPi-ARMv6-Buster.7z
root/dietpi

写入SD卡
umount /dev/sdb
dd if=/path/to/DietPi_vXX.img=/dev/sdb

配置WI-FI
vi /boot/dietpi.txt

#配置wifi
AUTO_SETUP_NET_WIFI_ENABLED=1
AUTO_SETUP_NET_WIFI_SSID=shiguang
AUTO_SETUP_NET_WIFI_KEY=shiguang123

#静态ip
AUTO_SETUP_NET_USESTATIC=1
AUTO_SETUP_NET_STATIC_IP=192.168.0.168
AUTO_SETUP_NET_STATIC_MASK=255.255.255.0
AUTO_SETUP_NET_STATIC_GATEWAY=192.168.0.1
AUTO_SETUP_NET_STATIC_DNS=114.114.114.114

# 软件源
CONFIG_APT_RASPBIAN_MIRROR=http://mirrors.ustc.edu.cn/raspbian/raspbian/
CONFIG_APT_DEBIAN_MIRROR=http://mirrors.ustc.edu.cn/archive.raspberrypi.org/


树莓派4B 更新wiringPi库到2.52的方法
最新发布的树莓派4B在烧录了官方系统buster以后，如果直接使用gpio readall去查看GPIO会出现错误。无法识别的情况，需要根据以下步骤进行wiringPi的更新：
cd /tmp
wget https://project-downloads.drogon.net/wiringpi-latest.deb
sudo dpkg -i wiringpi-latest.deb
gpio -v
gpio readall

=================================================================
MAC烧PI4系统
diskutil eraseDisk ExFAT raspberrypi disk2
diskutil unmountdisk disk2
sudo dd if=2019-09-26-raspbian-buster-lite.img of=/dev/disk2 bs=1m
windows使用win32diskimager工具
打开boot盘，然后在里面创建一个ssh文件（不带后缀）
vi ssh
vi wpa_supplicant.conf
或者
sudo nano /etc/wpa_supplicant/wpa_supplicant.conf
country=CN
ctrl_interface=DIR=/var/run/wpa_supplicant GROUP=netdev
update_config=1
network={
	ssid="shiguang"
	psk="shiguang123"
	key_mgmt=WPA-PSK
	priority=1
}
network={
	ssid="XD2019"
	psk="DX2019@"
	key_mgmt=WPA-PSK
	priority=2
}

如果无线网没有密码或者采用WEP加密方式的话，key_mgmt应设为NONE，密码字段由psk改成wep_key0即可。
先将安装好系统的SD卡插入树莓派。
再将USB接口的键盘和鼠标接上树莓派。
用HDMI线连接树莓派和电视或显示器。如果你的显示器是 VGA 接口输出，那么还需要一根 HDMI 转 VGA 线缆。
用网线连接树莓派和路由器。
接上电源线，并打开电源。
启动成功后通过路由器去获取树莓派ip地址

pi/raspberry
sudo passwd pi
sudo passwd root
sudo passwd --unlock root #顺便解锁root用户，不用每次sudo
su root
sudo raspi-config
修改密码/国家/语音/时区/USB启动

使用固定IP
vi /etc/dhcpcd.conf
interface wlan0
static ip_address=192.168.0.168/24
static routers=192.168.0.1
static domain_name_servers=114.114.114.114 8.8.8.8
或者
vi /etc/network/interfaces
iface eth0 inet static
address 192.168.0.168
netmask 255.255.255.0
gateway 192.168.0.1

更改阿里云的源:https://blog.csdn.net/qq_35451572/article/details/79516563
sudo cp /etc/apt/sources.list /etc/apt/sources.list.bak
sudo cp /etc/apt/sources.list.d/raspi.list /etc/apt/sources.list.d/raspi.list.bak

sudo gedit /etc/apt/sources.list
sudo nano /etc/apt/sources.list
#清华源
deb http://mirrors.tuna.tsinghua.edu.cn/raspbian/raspbian/ buster main contrib non-free rpi
deb-src http://mirrors.tuna.tsinghua.edu.cn/raspbian/raspbian/ buster main contrib non-free rpi
#中科大的源
deb http://mirrors.ustc.edu.cn/raspbian/raspbian/ buster main contrib non-free rpi
deb-src http://mirrors.ustc.edu.cn/raspbian/raspbian/ buster main contrib non-free rpi
#阿里云的源
deb https://mirrors.aliyun.com/raspbian/raspbian/ buster main contrib non-free rpi firmware
deb-src https://mirrors.aliyun.com/raspbian/raspbian/ buster main contrib non-free rpi firmware
deb http://mirrors.aliyun.com/ubuntu/ buster-staging main contrib non-free rpi firmware
deb-src http://mirrors.aliyun.com/ubuntu/ buster-staging main contrib non-free rpi firmware

sudo nano /etc/apt/sources.list.d/raspi.list
#清华源
deb http://mirror.tuna.tsinghua.edu.cn/raspberrypi/ buster main ui
deb-src http://mirror.tuna.tsinghua.edu.cn/raspberrypi/ buster main ui
#中科大的源
deb http://mirrors.ustc.edu.cn/raspbian/raspbian/ buster main ui
deb-src http://mirrors.ustc.edu.cn/raspbian/raspbian/ buster main ui
#阿里云的源
deb https://mirrors.aliyun.com/raspbian/raspbian/ buster main ui
deb-src https://mirrors.aliyun.com/raspbian/raspbian/ buster main ui

sudo apt-get install vim
sudo apt-get update
sudo apt-get upgrade
sudo apt-get dist-upgrade
sudo rpi-update

sudo apt-get -f install
安装拼音输入法
sudo apt-get install scim-pinyin -y
sudo apt-get install fcitx fcitx-googlepinyin fcitx-module-cloudpinyin fcitx-sunpinyin
安装中文字体
sudo apt-get install ttf-wqy-zenhei ttf-wqy-microhei

重启
sudo reboot
正确关机
sudo poweroff

如果系统启动报错： end Kernel panic - not syncing:vfs unable to mount root fs on unknown -block(179,2)，则可能是你在SD卡中做完系统格式化剩余盘导致的，不要选择格式化，再插入树莓派中重新启动即可。

安装pip3
sudo apt-get install python3-pip -y #安装
sudo python -m pip install --upgrade pip #升级方法1
sudo pip3 install --upgrade pip #升级方法2
sudo apt-get remove python3-pip #卸载

更改pip源
cat > ~/.pip/pip.conf << EOF

[global]
trusted-host=mirrors.aliyun.com
index-url=https://mirrors.aliyun.com/pypi/simple/

EOF

sudo apt-get install python-serial
sudo apt-get install python3-rpi.gpio
sudo pip install wiringpi
sudo apt-get install sqlite3
sudo apt-get install git -y
sudo apt-get install ssh -y

Buster系统自带两个版本的Python，2.7.16和3.7.3，所以使用时最好区分开
python2 -m pip show RPi.GPIO
python3 -m pip show RPi.GPIO

https://www.jianshu.com/p/fd23928181dd
sudo apt-get install libopencv-dev python-opencv
sudo pip3 install numpy
udo apt-get install build-essential git cmake pkg-config -y
sudo apt-get install libjpeg8-dev -y
sudo apt-get install libtiff5-dev -y
sudo apt-get install libjasper-dev -y
sudo apt-get install libpng12-dev -y
sudo apt-get install libavcodec-dev libavformat-dev libswscale-dev libv4l-dev -y
sudo apt-get install libgtk2.0-dev -y
sudo apt-get install libatlas-base-dev gfortran -y

sudo apt-get install mplayer

git clone https://github.com/Kitt-AI/snowboy.git
snowboy/swig/Python3 && make
sudo apt-get install pulseaudio
sudo apt-get install sox
sox -d -d
sudo apt-get install python3-pyaudio
sudo apt-get install swig
sudo apt-get install libatls-base-dev
wget http://www.portaudio.com/archives/pa_stable_v190600_20161030.tgz
tar -zxf pa_stable_v190600_20161030.tgz
#解压之后的文件夹名称是 portaudio
cd portaudio
sudo ./configure
sudo make && make install
pip install pyaudio
rec temp.wav
python demo.py snowboy.pmdl

sudo pip3 install pyserial
sudo pip3 install psutil
sudo pip3 install flask
sudo pip3 install flask_socketio

vi ~/.asoundrc 更改声卡设置
type asym
   playback.pcm {
     type plug
     slave.pcm "hw:0,0"
   }
   capture.pcm {
     type plug
     slave.pcm "hw:1,0"
   }
}

aplay -l
arecord -l
nano ~/.asoundrc
arecord -t wav -f S16_LE -c 2 -d 10 -r 24000 temp.wav
aplay temp.wav
sudo apt-get install mpg123
apt-get install mpg123
mpg123 'http://translate.google.com/translate_tts?ie=UTF-8&tl=en&q=today+is+sunday'

单声道、16位、16000HZ采样率
arecord -r 16000 -c 1 -t wav -f S16_LE test.wav
输入设备是麦克风，输出可以是HDMI、耳机或音响，我这里用了音响。下面是我的树莓派照片。4个USB接口分别连了无线网卡、无线键盘、麦克风、音响供电。
arecord -D "plughw:1" -f S16_LE -r 16000 test.wav

apt-get install arecord ffmpeg omxplayer
arecord -D "plughw:1,0" -d 5 file.wav
ffmpeg -i file.wav -ar 16000 -acodec flac file.flac
wget -q -U "Mozilla/5.0" --post-file file.flac --header "Content-Type: audio/x-flac; rate=16000" -O - "[color=blue !important]http://www.google.com/speech-api/v1/recognize?lang=zh-cn&client=chromium"
所以要选择Analog输出，这里就需要做一些配置:安装声卡服务
sudo apt-get install alsa-utils
sudo modprobe snd_bcm2835
设置Analog输出模式:
sudo amixer cset numid=3 1
sudo aplay test.wav
检查是否识别出了 USB 设备
lsusb
dmesg | grep USB
安装 ALSA 的录音应用软件
sudo apt-get -y  install  alsa-utils   pulseseaudio
arecord  -L
arecord –device=hw:1,0 –format S16_LE –rate 44100 -c1 test.wav
–device=hw:1,0 是定义录音的设备. –format S16_LE 是定义 signed 16-bit (S16_LE) 音频. 码率是: 44100 Hz (--rate 44100) 后面的参数是定义为mono 格式 (-c1) , 文件名为: test.wav
aplay –device=plughw:1,0 test.wav
调节麦克风音量
alsamixer -c 1

sudo apt-get install sox libsox-fmt-mp3 git-core python-dev bison libasound2-dev libportaudio-dev python-pyaudio libatlas-base-dev python-pymad --yes


查看CPU温度（读数除以1000）：cat /sys/class/thermal/thermal_zone0/temp
查看GPU温度：/opt/vc/bin/vcgencmd measure_temp


